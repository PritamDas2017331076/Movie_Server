# Movie_Server #
Simple api server for CRUD operation <br>
## Technology Used ##
- Golang
- Gorilla Mux
- JWT Authentication
- Cobra CLI
## Running the server ##
### Running the server from direct source code ##
```git clone git@github.com:PritamDas2017331076/Movie_Server.git``` <br>

Go to the API-server directory and run <br>
```go mod tidy``` <br>
```go mod vendor``` <br>
```go run . start``` or ```go run . start -p <choosen port>```

## Data model ##
<pre><code>
// For string basic information of movies
type Director struct {
	Name string `json:"name"`
	Id   int    `json:"id"`
}

type Genre struct {
	Name string `json:"name"`
	Id   int    `json:"id"`
}

type Movie struct {
	Name      string `json: "name"`
	Id        int    `json:"id"`
	Directors []int  `json:"directors"`
	Genres    []int  `json:"genres"`
}

type User struct {
	Id       string `json:"id"`
	Password string `json:"password"`
}
</code></pre>

## api calls ##

| Method |                         url                          | payload | actions                             |
|--------|:----------------------------------------------------:|--------:|-------------------------------------|
| GET    |             ```http://localhost:8080/```             |      No | call home page                      |
| POST   |       ```http://localhost:8080/adddirector```        |     Yes | add new director                    |
| DELETE |      ```http://localhost:8080/deletedirector```      |      No | delete director                     |
| GET    |       ```http://localhost:8080/getdirector```        |      No | get all the directors               |
| PUT    |   ```http://localhost:8080//updatedirector/{id}```   |     Yes | update director by id               |
| POST   |         ```http://localhost:8080/addgenre```         |     Yes | add new genre                       |
| DELETE |       ```http://localhost:8080/deletegenre```        |      No | delete genre                        |
| GET    |         ```http://localhost:8080/getgenre```         |      No | get all the genres                  |
| PUT    |    ```http://localhost:8080//updategenre/{id}```     |     Yes | update genre by id                  |
| POST   |         ```http://localhost:8080/adduser```          |     Yes | add new user                        |
| DELETE |        ```http://localhost:8080/deleteuser```        |      No | delete user                         |
| GET    |         ```http://localhost:8080/getuser```          |      No | get all the users                   |
| PUT    |     ```http://localhost:8080//updateuser/{id}```     |     Yes | update director by id               |
| POST   |        ```http://localhost:8080/loginuser```         |     Yes | login  user                         |
| GET    |          ```http://localhost:8080/logout```          |      No | logout user                         |
| POST   |         ```http://localhost:8080/addmovie```         |     Yes | add a new movie                     |
| DELETE |       ```http://localhost:8080/deletemovie```        |      No | delete a movie                      |
| DELETE |  ```http://localhost:8080/deletemoviegenre/{id}```   |      No | delete a movie genre in movie       |
| DELETE | ```http://localhost:8080/deletemoviedirector/{id}``` |      No | delete a movie director in movie    |
| POST   |  ```http://localhost:8080/addmoviedirector/{id}```   |     Yes | add a movie director in movie       |
| POST   |    ```http://localhost:8080/addmoviegenre/{id}```    |     Yes | add a movie genre in movie          |
| GET    |         ```http://localhost:8080/getmovie```         |      No | get all the movies                  |
| GET    |     ```http://localhost:8080/getmoviebygenre```      |      No | get all the movies by a genre id    |
| GET    |    ```http://localhost:8080/getmoviebydirector```    |      No | get all the movies by a director id |
| PUT    |    ```http://localhost:8080//updatemovie/{id}```     |     Yes | update movie by id                  |

## FORM OF CURL COMMAND ##
- curl -X -d '$data' http://localhost:8080/loginuser
- curl --cookie "Token=$Token" http://localhost:8080/getmovie


## CAUTIONS ##
- All the api call is authorized by JWT token. So we need to pass token as a cookie while calling methods(except for homepage request) by postman or curl.
- A token can be generated by logging in.